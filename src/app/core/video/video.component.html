<div [ngClass]="modalIndex === -1 ? 'd-none' : ''" class="modal-backdrop fade show"></div>


<div class="container-fluid">
    <h5>Régie vidéo</h5>
    <div class="row">
        <div *ngFor="let video of videos; let i = index" class="col-3">
            <div *ngIf="modalIndex === i" class="h-100 w-100 bg-light border shadow"></div>
            <div [ngClass]="modalIndex === i ? 'modal modal-xl d-block' : ''">
                <div [ngClass]="modalIndex === i ? 'modal-dialog modal-dialog-centered' : ''">
                    <div [ngClass]="modalIndex === i ? 'modal-content' : ''">
                        <div *ngIf="modalIndex === i" class="modal-header">
                            <h1 class="modal-title fs-5">Vidéo {{ modalIndex+1 }}</h1>
                            <span tabindex="0" type="button" class="btn-close" (click)="closeModal()" (keyup)="closeModal()"></span>
                        </div>
                        <div [ngClass]="modalIndex === i ? 'modal-body' : ''">
                            <div class="video-container">
                                <div class="row">
                                    <div class="col-12 position-relative">
                                        <div *ngIf="modalIndex !== i"
                                            class="w-100 h-100 position-absolute top-0 start-0 z-1"
                                            (click)="openModal(i)"
                                            (keydown.enter)="openModal(i)"
                                            tabindex="0"
                                            role="link"
                                            aria-label="Open modal"></div>
                                        <video
                                            [ngStyle]="modalIndex === i ? { 'transform': 'scale(' + scale + ')'} : {}"
                                            [id]="'video' + i" class="border object-fit-contain w-100"
                                            [controls]="modalIndex === i"
                                            #videoElement></video>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div *ngIf="modalIndex === i" class="modal-footer">
                            <div class="row w-100">
                                <div class="col-6">
                                    <div class="btn-group" role="group">
                                        <button class="btn btn-primary" (click)="skipBackward(i)">-15s</button>
                                        <button class="btn btn-primary" (click)="skipForward(i)">+15s</button>
                                    </div>
                                </div>
                                <div class="col-6 d-flex justify-content-end">
                                    <div class="btn-group" role="group">
                                        <button class="btn btn-primary" (click)="scale=1" *ngIf="scale!==1">
                                            Réinitialiser
                                        </button>
                                        <button class="btn btn-primary" (click)="scale=scale+0.1" title="Agrandir">
                                            <span class="zoom">
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    viewBox="0 0 512 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
                                                    <path
                                                        d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM184 296c0 13.3 10.7 24 24 24s24-10.7 24-24V232h64c13.3 0 24-10.7 24-24s-10.7-24-24-24H232V120c0-13.3-10.7-24-24-24s-24 10.7-24 24v64H120c-13.3 0-24 10.7-24 24s10.7 24 24 24h64v64z" />
                                                </svg>
                                            </span>
                                        </button>
                                        <button class="btn btn-primary" (click)="scale=scale > 0.2 ? (scale-0.1) : 0.1"
                                            title="Réduire">
                                            <span class="zoom">
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                    viewBox="0 0 512 512"><!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
                                                    <path
                                                        d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM136 184c-13.3 0-24 10.7-24 24s10.7 24 24 24H280c13.3 0 24-10.7 24-24s-10.7-24-24-24H136z" />
                                                </svg>
                                            </span>
                                        </button>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>